ACTOR PistolSelector : actor replaces Clip
{
States
	{
	Spawn:
		TNT1 A 0 NoDelay A_JumpIf(GetCVar("PistolChoice") == 0, "Weapon1")
		TNT1 A 0 A_JumpIf(GetCVar("PistolChoice") == 1, "Weapon2")
		TNT1 A 0 A_JumpIf(GetCVar("PistolChoice") == 2, "Weapon3")
		Stop
    Weapon1:
		TNT1 A 0 A_jump(96,"Weapon3")
	Weapon2:
	      TNT1 A 0 A_jump(192,"AmmoDrop")
		TNT1 A 0 A_SpawnItem("AutoloaderSpawn")
		Stop
	Weapon3:
	      TNT1 A 0 A_jump(192,"AmmoDrop")
		TNT1 A 0 A_SpawnItem("PistolSpawn")
		Stop
	AmmoDrop:
	    TNT1 A 0 A_SpawnItem("fortyfiveammo")
		Stop
	}
}
ACTOR AutoloaderSpawn : CustomInventory
{
	Inventory.Amount 0
	scale 0.7
	Inventory.Icon "GLPSA0"
	Inventory.PickupMessage "Got the 9mm Autoloader."
	Inventory.PickupSound "items/gunspickup"
	+DROPPED
	States
	{
	Spawn:
		GLPP A 10
		GLPP A 1 bright
		loop
	Pickup:
	    TNT1 A 0 A_JumpIfInventory("Glock3", 1, 4) //Skips giving you the normal glock if you have the upgrade
		TNT1 A 0 A_JumpIfInventory("Glock2", 1, 3) //Skips giving you the normal glock if you have the upgrade
		TNT1 A 0 A_GiveInventory("Glock")
		TNT1 A 0 A_Jump(256, 2)
		TNT1 A 0 A_GiveInventory("NineMilAmmo", 6)
		TNT1 A 0
		Stop
	}
}
ACTOR PistolSpawn : CustomInventory 
{
	Inventory.Amount 0
	scale 0.6
	Inventory.Icon "590PA0"
	Inventory.PickupMessage "Got the Police Pistol."
	Inventory.PickupSound "items/gunspickup"
	+DROPPED
	States
	{
	Spawn:
		590P A 10
		590P A 1 bright
		loop
	Pickup:
	    TNT1 A 0 A_JumpIfInventory("PolicePistol3", 1, 4) //Skips giving you the normal pistol if you have the upgrade
	    TNT1 A 0 A_JumpIfInventory("PolicePistol2", 1, 3) //Skips giving you the normal pistol if you have the upgrade
		TNT1 A 0 A_GiveInventory("PolicePistol")
		TNT1 A 0 A_Jump(256, 2)
		TNT1 A 0 A_GiveInventory("NineMilammo", 10)
		TNT1 A 0
		Stop
	}
}
ACTOR GlockBuild2 : CustomInventory
{
	Inventory.Amount 0
	scale 0.7
	Inventory.Icon "GLPPA0"
	+DROPPED
	States
	{
	Spawn:
		GLPP A 10
		loop
	Pickup:
		TNT1 A 0 A_GiveInventory("Glock2")
		TNT1 A 0 A_takeInventory("Glock")
		TNT1 A 0 A_PlaySound("special/workbench",CHAN_ITEM)
		TNT1 A 0
		Stop
	}
}
ACTOR GlockBuild3 : CustomInventory
{
	Inventory.Amount 0
	scale 0.7
	Inventory.Icon "GLPPA0"
	+DROPPED
	States
	{
	Spawn:
		GLPP A 10
		loop
	Pickup:
		TNT1 A 0 A_GiveInventory("Glock3")
		TNT1 A 0 A_takeInventory("Glock2")
		TNT1 A 0 A_takeInventory("Glock")
		TNT1 A 0 A_PlaySound("special/workbench",CHAN_ITEM)
		TNT1 A 0
		Stop
	}
}
ACTOR PistolBuild : CustomInventory
{
	Inventory.Amount 0
	scale 0.7
	Inventory.Icon "590PB0"
	+DROPPED
	States
	{
	Spawn:
		590P B 10
		loop
	Pickup:
		TNT1 A 0 A_GiveInventory("PolicePistol2")
		TNT1 A 0 A_takeInventory("PolicePistol")
		TNT1 A 0 A_PlaySound("special/workbench",CHAN_ITEM)
		TNT1 A 2
		Stop
	}
}
ACTOR PistolBuild2 : CustomInventory
{
	Inventory.Amount 0
	scale 0.7
	Inventory.Icon "590PB0"
	+DROPPED
	States
	{
	Spawn:
		590P B 10
		loop
	Pickup:
		TNT1 A 0 A_GiveInventory("PolicePistol3")
		TNT1 A 0 A_takeInventory("PolicePistol2")
		TNT1 A 0 A_takeInventory("PolicePistol")
		TNT1 A 0 A_PlaySound("special/workbench",CHAN_ITEM)
		TNT1 A 2
		Stop
	}
}
Actor LaserDot : FastProjectile
{
radius 2
height 2
+FORCEXYBILLBOARD
+NOGRAVITY
+NOBLOCKMAP
+BLOODLESSIMPACT
+SKYEXPLODE
+DONTSPLASH
+NOTRIGGER
+NOTONAUTOMAP
-ALLOWPARTICLES
+NOTIMEFREEZE
speed 150
damage 0
scale .25
missileheight 8
states
	{
	Spawn:
		TNT1 A 5
		stop
	Death:
		TNT1 A 1 Bright A_SpawnItem("Laserdotpuff",0,5)
		stop
	}
}
Actor Laserdotpuff : bulletpuff
{
    +FORCEXYBILLBOARD
    +NOGRAVITY
    +NOBLOCKMAP
	+ALWAYSPUFF
	+PUFFGETSOWNER
	+BLOODLESSIMPACT
	+PUFFONACTORS
	+SKYEXPLODE
	+DONTSPLASH
	+NOTRIGGER
   	+NOTONAUTOMAP
	-ALLOWPARTICLES
	+NOTIMEFREEZE
	VSpeed 0
	Renderstyle Add
	Scale 0.2
	States
	{
		Spawn:
		Crash:
		Death:
		XDeath:
			LDOT A 2 Bright
			Stop
	}
}
ACTOR Glockloaded : Ammo
{
 Inventory.MaxAmount 16
 Ammo.BackPackMaxAmount 16
 +IGNORESKILL
}
ACTOR Pistolloaded : Ammo
{
 Inventory.MaxAmount 25
 Ammo.BackPackMaxAmount 25
 +IGNORESKILL
}
actor Glock: Weapon
{
 Weapon.SelectionOrder 2000
 Weapon.AmmoUse1 1
 Weapon.AmmoUse2 1
 Weapon.AmmoGive2 6
 Weapon.AmmoType2 "NineMilammo"
 Weapon.AmmoType1 "GlockLoaded"
 weapon.slotnumber 4
 Inventory.Pickupmessage "Got the 9mm Autoloader."
 Inventory.PickupSound "items/gunspickup"
 Obituary "%o ran into %k's gat."
   Weapon.BobStyle Alpha
	Weapon.BobSpeed 1.5
	Weapon.BobRangeX .2
	Weapon.BobRangeY .5
 weapon.upsound "weapons/revolverup"
 Tag "9mm Autoloader"
  Inventory.Icon "GLPSA0"
 +AMMO_CHECKBOTH
 +NOALERT
 +NOAUTOFIRE
 +DROPPED
 scale 0.7
 States
 {
 Ready:
  TNT1 A 0 a_JumpIfInventory("lightlit",1,"Readylamp")
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"LoadedReady")
  GLKE D 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
  Loop
 LoadedReady:
  GLOK A 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
  Loop
 ReadyLamp:
     GLKL G 0 a_JumpIfInventory("Glockloaded",1,"readylamploaded")
     GLKL G 0 a_JumpIfInventory("batteries",1,2)
	 GLKL G 0 a_jump(256,"Unlight")
	 GLKL G 0 a_light2
	 GLKL G 0 A_jump(240,2)
     GLKL G 0 A_takeinventory("batteries",1,TIF_NOTAKEINFINITE)
     GLKL W 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
     GLKL X 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
     GLKL Y 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
     loop
 ReadyLampLoaded:
     GLKL G 0 a_JumpIfInventory("batteries",1,2)
	 GLKL G 0 a_jump(256,"Unlight")
	 GLKL G 0 a_light2
     GLKL G 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
     GLKL H 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
     GLKL I 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
     loop
 Deselect:
  "----" A 0 A_LIGHT0
  "----" A 0 A_takeinventory("Lightlit",1)
  "----" A 0 A_lower
  "----" A 1 A_Lower
  Loop
 Select:
  TNT1 A 0 A_takeInventory("flashlit")
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"Loadedselect")
  GLKE D 1 A_Raise
  GLKE D 0 A_Raise
  Loop
 LoadedSelect:
  GLOK A 1 A_Raise
  GLOK A 0 A_Raise
  Loop
 Fire:
  TNT1 A 0 a_JumpIfInventory("lightlit",1,"FireLamp")
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"FireReal")
  Goto Reload
 Firelamp:
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"FireLampReal")
  Goto Reload
 FireReal:
  GLOK A 0 A_gunflash
  GLOK A 0 A_PlayWeaponSound("weapons/glock")
  GLKF A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(2.5,2.5,-1,8,"hitpuff")
  GLKF B 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  GLOK A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
  TNT1 A 0 A_Light0
  GLOK B 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_AlertMonsters
  GLOK C 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,3)
  GLKE D 1  A_PlaySound("weapons/dryfire", CHAN_ITEM)
  GLKE D 1 a_refire("empty")
  goto ready
  GLOK A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  GLOK A 0 a_refire("fire")
  goto ready
   FirelampReal:
  GLKL A 0 A_gunflash("lampFlash")
  GLKL A 0 A_PlayWeaponSound("weapons/glock")
  GLKL J 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(2.5,2.5,-1,8,"hitpuff")
  GLKL K 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  GLKL A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
  GLKL K 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_AlertMonsters
  GLKL L 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  GLKL M 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,3)
  GLKL N 1  A_PlaySound("weapons/dryfire", CHAN_ITEM)
  GLKL N 1 a_refire("emptylamp")
  goto readylamp
  GLKL G 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  GLOK A 0 a_refire("firelamp")
  goto readylamp
 empty:
  GLKE D 1  A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  GLKE D 0  a_refire("empty")
  goto ready
  emptylamp:
  GLKL M 2  A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  GLOK A 0  a_refire("fire")
  goto readylamp
 Reload:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"ReloadLamp")
		TNT1 A 0 A_JumpIfInventory("GlockLoaded",16,"Ready")
		TNT1 A 0 A_jumpifinventory("glockloaded",1,"reloadchamber")
		GLKE D 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"Work1")
        Goto Ready
  ReloadLamp:
        TNT1 A 0 A_jumpifinventory("glockloaded",1,"reloadlamp2")
        GLKL S 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLKL S 0 A_JumpIfInventory("GlockLoaded",16,"Readylamp")
		TNT1 A 0 A_jumpifinventory("glockloaded",1,"lampchamber")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp")
        Goto Readylamp
  ReloadLamp2:
        GLKL G 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLKL G 0 A_JumpIfInventory("GlockLoaded",16,"Readylamp")
		TNT1 A 0 A_jumpifinventory("glockloaded",1,"lampchamber")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp")
        Goto Readylamp
 ReloadChamber:
		GLOK A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_JumpIfInventory("GlockLoaded",16,"Ready")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"Work2")
        Goto Ready
 lampChamber:
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp2")
        Goto Readylamp
 droplamp:
        GLKL S 1 a_playsound("weapons/lampclickoff")
	    GLKL T 2 a_light0
	    GLKL U 2 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
	    GLKL V 1 A_takeinventory("lightlit",1)
		TNT1 A 1
		GLKE HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLKE K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		GLKE LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLKE OOPPPP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop
 droplamp2:
        GLKL o 1 a_playsound("weapons/lampclickoff")
	    GLKL P 2 a_light0
	    GLKL Q 5 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
	    GLKL R 1 A_takeinventory("lightlit",1)
		TNT1 A 1
		GLOK HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLOK K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLOK LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		GLOK OOP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop2
	Work1:
	    GLKE DE 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		GLKE FG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 1
		GLKE HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLKE K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		GLKE LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLKE OOP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop
	Work2:
	    GLOK E 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		GLOK FG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 1
		GLOK HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLOK K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLOK LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		GLOK OOP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop2
	ReloadLoop:
		TNT1 A 0 a_JumpIfInventory("Glockloaded",15,"ReloadDone")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_Giveinventory("Glockloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop")
        Goto ReloadDone
	ReloadLoop2:
		TNT1 A 0 a_JumpIfInventory("Glockloaded",16,"ReloadDone")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_Giveinventory("Glockloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop2")
        Goto ReloadDone
	ReloadDone:
		GLOK QQQRST 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 3 
		GLOK GFE 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		Goto Ready
	Zoom:
	TNT1 A 0 a_JumpIfInventory("lightlit",1,"unlight")
	GLKL A 2 
	GLKL BCD 2 
	GLKL E 2 a_playsound("weapons/revolverup")
	GLKL F 2 A_giveinventory("lightlit",1) 
	GLKL G 1 a_playsound("weapons/lampclickon")
    goto readylamp
	unlight:
	GLKL G 1 a_playsound("weapons/lampclickoff")
	GLKL FE 2 a_light0
	GLKL E 2 a_playsound("weapons/revolverup")
	GLKL DCB 1 
	GLKL A 1 A_takeinventory("lightlit",1)
    goto loadedready
  USer1:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"AltUser1")
        GLOK DEFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		GLOK GFED 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
  AltUser1:
	GLKL O 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	GLKL PQ 2 a_light0
	GLKL R 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		GLOK GFED 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready     
   FLASH:
        TNT1 A 2
		goto lightdone
  lampFlash:
        TNT1 A 0
		stop
 Spawn:
       GLPP A 10
       GLPP A 1 bright
		loop
 }
}
actor Glock2: Glock
{
 Inventory.Pickupmessage "Got the Tacticool Autoloader."
 Obituary "%o ran into %k's laser-pointer."
 Tag "Tacticool Autoloader"
 Inventory.Icon "GLP2A0"
 scale 0.7
 +CHEATNOTWEAPON
 States
 {
 Ready:
  TNT1 A 0 a_JumpIfInventory("lightlit",1,"Readylamp")
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"LoadedReady")
  G2KE D 0 A_gunFLASH
  G2KE D 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
  G2KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  Loop
 LoadedReady:
  G2OK A 0 A_gunFLASH
  G2OK A 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
  G2KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  Loop
 ReadyLamp:
     G2KL G 0 a_JumpIfInventory("Glockloaded",1,"readylamploaded")
     G2KL G 0 a_JumpIfInventory("batteries",1,2)
	 G2KL G 0 a_jump(256,"Unlight")
	 G2KL G 0 a_light2
	 G2KL G 0 A_jump(240,2)
     G2KL G 0 A_takeinventory("batteries",1,TIF_NOTAKEINFINITE)
	 G2KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G2KL W 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G2KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G2KL X 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G2KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G2KL Y 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G2KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     loop
 ReadyLampLoaded:
     G2KL G 0 a_JumpIfInventory("batteries",1,2)
	 G2KL G 0 a_jump(256,"Unlight")
	 G2KL G 0 a_light2
	 G2KL G 0 A_jump(240,2)
     G2KL G 0 A_takeinventory("batteries",1,TIF_NOTAKEINFINITE)
	 G2KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G2KL G 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G2KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G2KL H 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G2KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G2KL I 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G2KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     loop
 Deselect:
  "----" A 0 A_LIGHT0
  "----" A 0 A_takeinventory("Lightlit",1)
  "----" A 0 A_lower
  "----" A 1 A_Lower
  Loop
 LoadedDeselect:
  G2OK A 0 A_lower
  G2OK A 1 A_Lower
  Loop
 Select:
  TNT1 A 0 A_takeInventory("flashlit")
  TNT1 A 0 A_TakeInventory("Glock",1)
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"Loadedselect")
  G2KE D 1 A_Raise
  G2KE D 0 A_Raise
  Loop
 LoadedSelect:
  G2OK A 1 A_Raise
  G2OK A 0 A_Raise
  Loop
 Fire:
  TNT1 A 0 a_JumpIfInventory("lightlit",1,"FireLamp")
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"FireReal")
  Goto Reload
 Firelamp:
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"FireLampReal")
  Goto Reload
 FireReal:
  G2OK A 0 A_gunFLASH
  G2OK A 0 A_PlayWeaponSound("weapons/glock")
  G2KF A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G2KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(1,1,-1,8,"hitpuff")
  G2KF B 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G2OK A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
  TNT1 A 0 A_Light0
  G2OK B 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_AlertMonsters
  G2KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  G2OK C 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,4)
  G2KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  G2KE D 1  A_PlaySound("weapons/dryfire", CHAN_ITEM)
  G2KE D 1 a_refire("empty")
  goto ready
  G2OK A 0 A_GUNFLASH
  G2OK A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G2OK A 0 a_refire("fire")
  goto ready
  FirelampReal:
  G2KL A 0 A_gunflash("lampFlash")
  G2KL A 0 A_PlayWeaponSound("weapons/glock")
  G2KL J 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(2.5,2.5,-1,8,"hitpuff")
  G2KL K 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G2KL A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
  G2KL K 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_AlertMonsters
  G2KL L 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G2KL M 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,3)
  G2KL N 1  A_PlaySound("weapons/dryfire", CHAN_ITEM)
  G2KL N 1 a_refire("emptylamp")
  goto readylamp
  G2KL G 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G2KL A 0 a_refire("firelamp")
  goto readylamp
 empty:
  G2KE D 1  A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G2OK A 0 A_gunFLASH
  G2KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  G2KE D 0  a_refire("empty")
  goto ready
 emptylamp:
  GLKL M 2  A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  GLOK A 0  a_refire("fire")
  goto readylamp
 Reload:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"ReloadLamp")
        TNT1 A 0 A_jumpifinventory("glockloaded",1,"reloadchamber")
		G2KE D 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
		TNT1 A 0 A_JumpIfInventory("GlockLoaded",16,"Ready")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"Work1")
        Goto Ready
  ReloadLamp:
        TNT1 A 0 A_jumpifinventory("glockloaded",1,"reloadlamp2")
        G2KL S 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2KL S 0 A_FireCustomMissile("LaserDot",0,0,0,0)
		GLKL S 0 A_JumpIfInventory("GlockLoaded",16,"Readylamp")
		TNT1 A 0 A_jumpifinventory("glockloaded",1,"lampchamber")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp")
        Goto Readylamp
  ReloadLamp2:
        G2KL G 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2KL G 0 A_FireCustomMissile("LaserDot",0,0,0,0)
		GLKL G 0 A_JumpIfInventory("GlockLoaded",16,"Readylamp")
		TNT1 A 0 A_jumpifinventory("glockloaded",1,"lampchamber")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp")
        Goto Readylamp
 ReloadChamber:
		G2OK A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2KL G 0 A_FireCustomMissile("LaserDot",0,0,0,0)
		TNT1 A 0 A_JumpIfInventory("GlockLoaded",16,"Ready")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"Work2")
        Goto Ready
 lampChamber:
		TNT1 A 0 A_JumpIfInventory("GlockLoaded",16,"Ready")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp2")
        Goto Readylamp
 droplamp:
        G2KL S 1 a_playsound("weapons/lampclickoff")
	    G2KL T 2 a_light0
	    G2KL U 2 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
	    G2KL V 1 A_takeinventory("lightlit",1)
		TNT1 A 1
		G2KE HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2KE K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		G2KE LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2KE OOPPPP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop
 droplamp2:
        G2KL o 1 a_playsound("weapons/lampclickoff")
	    G2KL P 2 a_light0
	    G2KL Q 2 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
	    G2KL R 1 A_takeinventory("lightlit",1)
		TNT1 A 1
		G2OK HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2OK K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2OK LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		G2OK OOP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop2
	Work1:
	    G2KE E 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		G2KE FG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 1
		G2KE HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2KE K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2KE LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		G2KE OOPPPP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop
	Work2:
	    G2OK E 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		G2OK FG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 1
		G2OK HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2OK K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2OK LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		G2OK OOP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop2
	ReloadLoop:
		TNT1 A 0 a_JumpIfInventory("Glockloaded",15,"ReloadDone")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_Giveinventory("Glockloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop")
        Goto ReloadDone
	ReloadLoop2:
		TNT1 A 0 a_JumpIfInventory("Glockloaded",16,"ReloadDone")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_Giveinventory("Glockloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop2")
        Goto ReloadDone
	ReloadDone:
		G2OK QRST 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 3 
		G2OK GFE 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		Goto Ready
Zoom:
	TNT1 A 0 a_JumpIfInventory("lightlit",1,"unlight")
	G2KL A 2 
	G2KL BCD 2 
	G2KL E 2 a_playsound("weapons/revolverup")
	G2KL F 2 A_giveinventory("lightlit",1) 
	G2KL G 1 a_playsound("weapons/lampclickon")
    goto readylamp
	unlight:
	G2KL G 1 a_playsound("weapons/lampclickoff")
	G2KL FE 2 a_light0
	G2KL E 2 a_playsound("weapons/revolverup")
	G2KL DCB 1 
	G2KL A 1 A_takeinventory("lightlit",1)
    goto loadedready
  User1:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"Altuser1")
        G2OK DEFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		G2OK GFED 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
  AltUser1:
        GLKL O 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	    GLKL PQ 2 a_light0
	    GLKL R 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		 KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		G2OK GFED 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
  FLASH:
    G2OL A 1 bright a_jump(128,1)
	goto lightdone
	G2OL B 1 bright a_jump(128,1)
	goto lightdone
	G2OL C 1 bright
	goto lightdone
  lampFlash:
        TNT1 A 0
		stop
 Spawn:
        GL2P A 10
		GL2P A 1 bright
		loop
 }
}
actor Glock3: Glock
{
 Inventory.Pickupmessage "Got the Tacticool Burstfire Autoloader."
 Obituary "%o ran into %k's laser-pointer."
 Tag "Tacticool Burstfire Autoloader"
 Inventory.Icon "GLP2A0"
 scale 0.7
 +CHEATNOTWEAPON
 States
 {
 Ready:
  TNT1 A 0 a_JumpIfInventory("lightlit",1,"Readylamp")
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"LoadedReady")
  G3KE D 0 A_gunFLASH
  G3KE D 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
  G3KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  Loop
 LoadedReady:
  G3OK A 0 A_gunFLASH
  G3OK A 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
  G3KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  Loop
 ReadyLamp:
     G3KL G 0 a_JumpIfInventory("Glockloaded",1,"readylamploaded")
     G3KL G 0 a_JumpIfInventory("batteries",1,2)
	 G3KL G 0 a_jump(256,"Unlight")
	 G3KL G 0 a_light2
	 G3KL G 0 A_jump(240,2)
     G3KL G 0 A_takeinventory("batteries",1,TIF_NOTAKEINFINITE)
	 G3KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G3KL W 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G3KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G3KL X 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G3KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G3KL Y 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G3KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     loop
 ReadyLampLoaded:
     G3KL G 0 a_JumpIfInventory("batteries",1,2)
	 G3KL G 0 a_jump(256,"Unlight")
	 G3KL G 0 a_light2
	 G3KL G 0 A_jump(240,2)
     G3KL G 0 A_takeinventory("batteries",1,TIF_NOTAKEINFINITE)
	 G3KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G3KL G 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G3KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G3KL H 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G3KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G3KL I 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G3KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     loop
 Deselect:
  "----" A 0 A_LIGHT0
  "----" A 0 A_takeinventory("Lightlit",1)
  "----" A 0 A_lower
  "----" A 1 A_Lower
  Loop
 LoadedDeselect:
  G3OK A 0 A_lower
  G3OK A 1 A_Lower
  Loop
 Select:
   TNT1 A 0 A_takeInventory("flashlit")
  TNT1 A 0 A_TakeInventory("Glock",1)
  TNT1 A 0 A_TakeInventory("Glock2",1)
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"Loadedselect")
  G3KE D 1 A_Raise
  G3KE D 0 A_Raise
  Loop
 LoadedSelect:
  G3OK A 1 A_Raise
  G3OK A 0 A_Raise
  Loop
 Fire:
  TNT1 A 0 a_JumpIfInventory("lightlit",1,"FireLamp")
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"FireReal")
  Goto Reload
 Firelamp:
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"FireLampReal")
  Goto Reload
 FireReal:
  G3OK A 0 A_gunFLASH
  G3OK A 0 A_PlayWeaponSound("weapons/glock")
  G3KF A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G3KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(1,1,-1,8,"hitpuff")
  G3KF B 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G3OK A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
  TNT1 A 0 A_Light0
  G3OK B 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_AlertMonsters
  G3KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  G3OK C 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,4)
  G3KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  G3KE D 1  A_PlaySound("weapons/dryfire", CHAN_ITEM)
  G3KE D 1 a_refire("empty")
  goto ready
  G3OK A 0 A_GUNFLASH
  G3OK A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G3OK A 0 a_refire("fire")
  goto ready
  FirelampReal:
  G3KL A 0 A_gunflash("lampFlash")
  G3KL A 0 A_PlayWeaponSound("weapons/glock")
  G3KL J 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(2.5,2.5,-1,8,"hitpuff")
  G3KL K 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G3KL A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
  G3KL K 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_AlertMonsters
  G3KL L 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G3KL M 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,3)
  G3KL N 1  A_PlaySound("weapons/dryfire", CHAN_ITEM)
  G3KL N 1 a_refire("emptylamp")
  goto readylamp
  G3KL G 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G3KL A 0 a_refire("firelamp")
  goto readylamp
 empty:
  G3KE D 1  A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G3OK A 0 A_gunFLASH
  G3KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  G3KE D 0  a_refire("empty")
  goto ready
 emptylamp:
  G3KL M 2  A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G3OK A 0  a_refire("fire")
  goto readylamp
 Reload:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"ReloadLamp")
        TNT1 A 0 A_jumpifinventory("glockloaded",1,"reloadchamber")
		G3KE D 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
		TNT1 A 0 A_JumpIfInventory("GlockLoaded",16,"Ready")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"Work1")
        Goto Ready
  ReloadLamp:
        TNT1 A 0 A_jumpifinventory("glockloaded",1,"reloadlamp2")
        G3KL S 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3KL S 0 A_FireCustomMissile("LaserDot",0,0,0,0)
		G3KL S 0 A_JumpIfInventory("GlockLoaded",16,"Readylamp")
		TNT1 A 0 A_jumpifinventory("glockloaded",1,"lampchamber")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp")
        Goto Readylamp
  ReloadLamp2:
        G3KL G 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3KL G 0 A_FireCustomMissile("LaserDot",0,0,0,0)
		G3KL G 0 A_JumpIfInventory("GlockLoaded",16,"Readylamp")
		TNT1 A 0 A_jumpifinventory("glockloaded",1,"lampchamber")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp")
        Goto Readylamp
 ReloadChamber:
		G3OK A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3KL G 0 A_FireCustomMissile("LaserDot",0,0,0,0)
		TNT1 A 0 A_JumpIfInventory("GlockLoaded",16,"Ready")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"Work2")
        Goto Ready
 lampChamber:
		TNT1 A 0 A_JumpIfInventory("GlockLoaded",16,"Ready")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp2")
        Goto Readylamp
 droplamp:
        G3KL S 1 a_playsound("weapons/lampclickoff")
	    G3KL T 2 a_light0
	    G3KL U 2 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
	    G3KL V 1 A_takeinventory("lightlit",1)
		TNT1 A 1
		G3KE HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3KE K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		G3KE LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3KE OOPPPP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop
 droplamp2:
        G3KL o 1 a_playsound("weapons/lampclickoff")
	    G3KL P 2 a_light0
	    G3KL Q 2 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
	    G3KL R 1 A_takeinventory("lightlit",1)
		TNT1 A 1
		G3OK HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3OK K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3OK LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		G3OK OOP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop2
	Work1:
	    G3KE E 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		G3KE FG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 1
		G3KE HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3KE K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3KE LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		G3KE OOP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop
	Work2:
	    G3OK E 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		G3OK FG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 1
		G3OK HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3OK K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3OK LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		G3OK OOP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop2
	ReloadLoop:
		TNT1 A 0 a_JumpIfInventory("Glockloaded",15,"ReloadDone")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_Giveinventory("Glockloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop")
        Goto ReloadDone
	ReloadLoop2:
		TNT1 A 0 a_JumpIfInventory("Glockloaded",16,"ReloadDone")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_Giveinventory("Glockloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop2")
        Goto ReloadDone
	ReloadDone:
		G3OK QQQRST 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 3 
		G3OK GFE 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		Goto Ready
Zoom:
	TNT1 A 0 a_JumpIfInventory("lightlit",1,"unlight")
	G3KL A 2 
	G3KL BCD 2 
	G3KL E 2 a_playsound("weapons/revolverup")
	G3KL F 2 A_giveinventory("lightlit",1) 
	G3KL G 1 a_playsound("weapons/lampclickon")
    goto readylamp
	unlight:
	G3KL G 1 a_playsound("weapons/lampclickoff")
	G3KL FE 2 a_light0
	G3KL E 2 a_playsound("weapons/revolverup")
	G3KL DCB 1 
	G3KL A 1 A_takeinventory("lightlit",1)
    goto loadedready
  User1:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"AltUser1")
        G3OK DEFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		G3OK GFED 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
  AltUser1:
        G3KL O 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	    G3KL PQ 2 a_light0
	    G3KL R 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		 KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		G3OK GFED 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
  Altfire:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"Altlit")
        TNT1 A 0 a_JumpIfInventory("Glockloaded",3,"FireTriple")
        TNT1 A 0 a_JumpIfInventory("Glockloaded",2,"FireDouble")
	    TNT1 A 0 a_JumpIfInventory("Glockloaded",1,"FireSingle")
        Goto Reload
   Altlit:
        TNT1 A 0 a_JumpIfInventory("Glockloaded",3,"TripleLit")
        TNT1 A 0 a_JumpIfInventory("Glockloaded",2,"DoubleLit")
	    TNT1 A 0 a_JumpIfInventory("Glockloaded",1,"SingleLit")
        Goto Reload
  FireTriple:
        G3KB A 0 A_gunFLASH
        G3KB A 0 A_PlayWeaponSound("weapons/glock")
        G3KB A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KB A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (1, 1, -1, 20, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KB B 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3OK A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		G3KB A 0 A_PlayWeaponSound("weapons/glock")
		G3KB C 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KB C 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (2, 2, 1, 20, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KB D 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3OK A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		G3KB E 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		G3KB A 0 A_PlayWeaponSound("weapons/glock")
        G3KB E 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (2, 2, 1, 20, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_SetPitch(Pitch-1)
		TNT1 A 0 A_AlertMonsters
		G3KB F 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3OK A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		G3KB GHIJJKL 1 A_FireCustomMissile("LaserDot",0,0,0,0)
		G3KB L 1 A_refire("altfire")
		goto ready
   FireDouble:
        G3KB A 0 A_gunFLASH
        G3KB A 0 A_PlayWeaponSound("weapons/glock")
        G3KB A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KB A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (1, 1, -1, 18, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KB B 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		G3KB A 0 A_PlayWeaponSound("weapons/glock")
        G3OK A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		G3KB C 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KB C 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (2, 2, 1, 18, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KB D 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3OK A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		TNT1 A 0 A_AlertMonsters
		G3KB KL 1 A_FireCustomMissile("LaserDot",0,0,0,0)
		G3KB L 1 A_refire("altfire")
		goto ready
    FireSingle:
        G3KB A 0 A_gunFLASH
        G3KB A 0 A_PlayWeaponSound("weapons/glock")
        G3KB A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KB A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (1, 1, -1, 16, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KB B 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3OK A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		TNT1 A 0 A_AlertMonsters
		G3KB KL 1 A_FireCustomMissile("LaserDot",0,0,0,0)
		G3KB L 1 A_refire("altfire")
		goto ready
TripleLit:
        G3KL A 0 A_gunflash("lampFlash")
        G3KC A 0 A_PlayWeaponSound("weapons/glock")
        G3KC A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (1, 1, -1, 20, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KC B 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		G3KC A 0 A_PlayWeaponSound("weapons/glock")
		G3KC C 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC C 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (2, 2, 1, 20, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KC D 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		G3KC E 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		G3KC A 0 A_PlayWeaponSound("weapons/glock")
        G3KC E 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (2, 2, 1, 20, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_SetPitch(Pitch-1)
		TNT1 A 0 A_AlertMonsters
		G3KC F 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		G3KC GHIJJKL 1 A_FireCustomMissile("LaserDot",0,0,0,0)
		G3KC L 1 A_refire("altfire")
		goto ready
   DoubleLit:
        G3KL A 0 A_gunflash("lampFlash")
        G3KC A 0 A_PlayWeaponSound("weapons/glock")
        G3KC A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (1, 1, -1, 18, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KC B 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		G3KC A 0 A_PlayWeaponSound("weapons/glock")
        G3KC A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		G3KC C 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC C 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (2, 2, 1, 18, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KC D 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		TNT1 A 0 A_AlertMonsters
		G3KC KL 1 A_FireCustomMissile("LaserDot",0,0,0,0)
		G3KC L 1 A_refire("altfire")
		goto ready
    SingleLit:
        G3KL A 0 A_gunflash("lampFlash")
        G3KC A 0 A_PlayWeaponSound("weapons/glock")
        G3KC A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (1, 1, -1, 16, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KC B 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		TNT1 A 0 A_AlertMonsters
		G3KC KL 1 A_FireCustomMissile("LaserDot",0,0,0,0)
		G3KC L 1 A_refire("altfire")
		goto ready
  FLASH:
    G3OL A 1 bright a_jump(128,1)
	goto lightdone
	G3OL B 1 bright a_jump(128,1)
	goto lightdone
	G3OL C 1 bright
	goto lightdone
  lampFlash:
        TNT1 A 0
		stop
 Spawn:
        GL3P A 10
		GL3P A 1 bright
		loop
 }
}
actor PolicePistol: Weapon
{
 Weapon.SelectionOrder 2000
 Weapon.AmmoUse1 1
 Weapon.AmmoUse2 1
 Weapon.AmmoGive2 8
 Weapon.AmmoType2 "NineMilammo"
 Weapon.AmmoType1 "PistolLoaded"
 weapon.slotnumber 4
 Inventory.Pickupmessage "Got the Police Pistol!"
 Inventory.PickupSound "items/gunspickup"
 Obituary "%o was put down by %k's pistol."
 Weapon.BobStyle Alpha
 Weapon.BobSpeed 1.5
 Weapon.BobRangeX .2
 Weapon.BobRangeY .5
 weapon.upsound "weapons/pistolup"
 Tag "Police Pistol"
 Inventory.Icon "590GA0"
 +AMMO_CHECKBOTH
 +NOALERT
 +NOAUTOFIRE
 +DROPPED
 scale 0.7
 States
 {
 Ready:
  SW5G B 0 a_JumpIfInventory("lightlit",1,"Readylamp")
  SW5G B 0 a_JumpIfInventory("PistolLoaded",1,"LoadedReady")
  SW5G B 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
  Loop
 LoadedReady:
  SW5G A 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
  Loop
 ReadyLamp:
     SW5G D 0 a_JumpIfInventory("Pistolloaded",1,"readylamploaded")
	 SW5G D 0 a_JumpIfInventory("batteries",1,2)
	 SW5G D 0 a_jump(256,"Unlight")
	 SW5G D 0 a_light2
     SW5G D 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
     SW5G D 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
     SW5G D 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
     loop
 ReadyLampLoaded:
	 SW5G C 0 a_JumpIfInventory("batteries",1,2)
	 SW5G C 0 a_jump(256,"Unlight")
	 SW5G C 0 a_light2
     SW5G C 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
     SW5G C 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
     SW5G C 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
     loop
 Deselect:
  "----" #  0 A_LIGHT0
  "----" #  0 A_lower
  "----" #  1 A_Lower
  Loop
 Select:
  TNT1 A 0 A_takeInventory("flashlit")
  SW5G B 0 a_JumpIfInventory("PistolLoaded",12,"CheetReset")
  SW5G B 0 a_JumpIfInventory("pistolloaded",1,"Loadedselect")
  SW5G B 1 A_Raise
  SW5G B 0 A_Raise
  Loop
  CheetReset:
	SW5G B 0 A_takeinventory("PistolLoaded",25)
	SW5G B 0 A_giveinventory("PistolLoaded",11)
	SW5G B 0 a_JumpIfInventory("pistolloaded",1,"Loadedselect")
	SW5G B 1 A_Raise
	SW5G B 0 A_Raise
	Loop
 LoadedSelect:
  SW5G A 1 A_Raise
  SW5G A 0 A_Raise
  Loop
 Fire:
  SW5G A 0 a_JumpIfInventory("lightlit",1,"FireLamp")
  SW5G A 0 a_JumpIfInventory("pistolloaded",1,"FireReal")
  Goto Reload
 Firelamp:
  SW5G A 0 a_JumpIfInventory("pistolloaded",1,"FireLampReal")
  Goto Reload
 FireReal:
  TNT1 A 0 A_JumpIfInventory("pistolloaded",1,1)
  Goto Empty
 FireReal1:
  SW5G A 0 A_gunflash
  SW5G A 0 A_PlayWeaponSound("weapons/popistol")
  SW5F A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SW5G A 0 A_PlaySound("Distant/pistol",CHAN_BODY)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(1.2,1.2,-1,10,"hitpuff")
  SW5F B 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SW5F A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
  TNT1 A 0 A_Light0
  SW5F C 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_AlertMonsters
  TNT1 A 0 a_JumpIfInventory("pistolloaded",1,3)
  SW5F E 2 A_PlaySound("weapons/dryfire", CHAN_ITEM)
  SW5G B 1 a_refire("empty")
  goto ready
  SW5F D 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SW5G A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SW5G A 0 a_refire("firereal")
  goto ready
 FirelampReal:
  SW5G C 0 A_gunflash("lampFlash")
  SW5G C 0 A_PlayWeaponSound("weapons/popistol")
  SW5O J 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SW5O J 0 A_PlaySound("Distant/pistol",CHAN_BODY)
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(1.5,1.5,-1,10,"hitpuff")
  SW5O K 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SW5O K 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
  SW5O L 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_AlertMonsters
   TNT1 A 0 a_JumpIfInventory("pistolloaded",1,3)
  SW5O N 2 BRIGHT A_PlaySound("weapons/dryfire", CHAN_ITEM)
  SW5G D 1 BRIGHT a_refire("emptylamp")
  goto readylamp
  SW5O M 2 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SW5G C 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SW5G C 0 a_refire("firelampreal")
  goto readylamp
 empty:
  TNT1 A 0 A_PlaySound("weapons/dryfire", CHAN_ITEM)
 empty2:
  SW5G B 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SW5G B 0 a_refire("empty2")
  goto ready
 emptylamp:
  TNT1 A 0 A_PlaySound("weapons/dryfire", CHAN_ITEM)
  emptylamp2:
  SW5G D 2  BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SW5G D 0  a_refire("emptylamp2")
  goto readylamp
 Reload:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"ReloadLamp")
		TNT1 A 0 A_JumpIfInventory("pistolloaded",11,"Ready")
		TNT1 A 0 A_jumpifinventory("pistolloaded",1,"reloadchamber")
		SW5G B 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"Work1")
        Goto Ready
  ReloadLamp:
        TNT1 A 0 A_jumpifinventory("pistolloaded",1,"reloadlamp2")
        SW5G D 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		SW5G D 0 A_JumpIfInventory("pistolloaded",11,"Readylamp")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp")
        Goto Readylamp
  ReloadLamp2:
        SW5G C 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		SW5G C 0 A_JumpIfInventory("pistolloaded",11,"Readylamp")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp2")
        Goto Readylamp
 ReloadChamber:
		SW5G A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"Work2")
        Goto Ready
 lampChamber:
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp2")
        Goto Readylamp
 droplamp:
        SW5E X 2 BRIGHT a_playsound("items/flashlighton")
	    SW5E Y 2 A_takeinventory("lightlit",1)
	    SW5E Z 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 2 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5E DEFGH 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5E IJK 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		SW5E L 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5E M 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		goto reloadloop3
 droplamp2:
        SW5R X 2 BRIGHT a_playsound("items/flashlighton")
	    SW5R Y 2 A_takeinventory("lightlit",1)
	    SW5R Z 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 2 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5R DEFGH 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5R IJK 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		SW5R L 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5R M 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		goto reloadloop4
	Work1:
	    SW5E A 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		SW5E BC 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 3
		SW5E DEFGHIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		SW5E K 4 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5E LM 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop")
		goto reloaddone
	work1b://fake reload
		TNT1 A 3
		SW5E DEFGHIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		SW5E K 4 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5E LM 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop")
		goto reloaddone
	Work2:
	    SW5R A 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		SW5R BC 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 3
		SW5R DEFGHIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		SW5R K 4 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5R LM 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop2")
		goto reloaddone2
	work2b: //fake reload
		TNT1 A 3
		SW5R D 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5H EFGHIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		SW5H K 4 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5R LM 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop2")
		goto reloaddone2
	ReloadLoop:
		TNT1 A 0 a_JumpIfInventory("pistolloaded",10,"ReloadDone")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_Giveinventory("pistolloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop")
        Goto ReloadDone
	ReloadLoop2:
		TNT1 A 0 a_JumpIfInventory("pistolloaded",11,"ReloadDone2")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_Giveinventory("pistolloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop2")
        Goto ReloadDone2
	ReloadLoop3:
		TNT1 A 0 a_JumpIfInventory("pistolloaded",10,"ReloadDone3")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_Giveinventory("pistolloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop3")
        Goto ReloadDone3
	ReloadLoop4:
		TNT1 A 0 a_JumpIfInventory("pistolloaded",11,"ReloadDone4")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_Giveinventory("pistolloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop4")
        Goto ReloadDone4
	ReloadDone:
		SW5E NOPQR 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5E SSSTUV 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 2 
		SW5R CBA 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		Goto Ready
	ReloadDone2:
		SW5R NOPQRSS 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5R TUV 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 2 
		SW5R CBA 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		Goto Ready
	ReloadDone3:
		SW5E NOPQR 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5E SSSTUV 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 2 
		SW5R CB 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5O EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5O H 1 a_playsound("items/flashlighton")
		SW5O I 1 A_giveinventory("lightlit",1)
		Goto Ready
	ReloadDone4:
		SW5R NOPQRSS 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5R TUV 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 2 
		SW5R CB 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5O EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SW5O H 1 a_playsound("items/flashlighton")
		SW5O I 1 A_giveinventory("lightlit",1)
		Goto Ready
  ZOOM:
	TNT1 A 0 a_JumpIfInventory("lightlit",1,"unlight")
	goto light
  unlight:
	TNT1 A 0 A_JumpIfInventory("PistolLoaded",1,"unlightLoaded")
	SW5O W 1 a_playsound("items/flashlighton")
	TNT1 A 0 A_Light0
	SW5O V 2 A_takeinventory("lightlit",1)
	SW5O UT 2
	SW5O S 1  a_playsound("weapons/pistolup")
    SW5O RQP 1  
	SW5O O 1 
    goto ready
  unlightloaded:
	SW5O I 1 a_playsound("items/flashlighton")
	SW5O H 2 A_takeinventory("lightlit",1)
	TNT1 A 0 A_Light0
	SW5O FG 2
	SW5O E 1  a_playsound("weapons/pistolup")
    SW5O DCB 1  
	SW5O A 1 A_takeinventory("lightlit",1)
    goto ready
  Light:
    SW5O O 0 A_JumpIfInventory("PistolLoaded",1,"LightLoaded")
	SW5O O 2 a_playsound("weapons/pistolup")
	SW5O PQRST 2 
	SW5O U 2 a_playsound("items/flashlighton")
	SW5O VW 2 
	TNT1 A 0 A_giveinventory("lightlit",1) 
    goto readylamp
   LightLoaded:
	SW5O A 2 a_playsound("weapons/pistolup")
	SW5O BCDEF 2 
	SW5O G 1 a_playsound("items/flashlighton")
	SW5O HI 1
	TNT1 A 0 A_giveinventory("lightlit",1) 
    goto readylamp
  USer1:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"LightMelee")
		TNT1 A 0 A_JumpIfInventory("PistolLoaded",1,"punchLoaded")
        SW5E ABC 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		SW5E CBA 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
  PunchLoaded:
        SW5R ABC 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		SW5R CBA 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
   FLASH:
        TNT1 A 2
		goto lightdone
  lampFlash:
        TNT1 A 2
		goto lightdone
 Spawn:
       590P A 10
       590P A 1 bright
		loop
 }
}
actor PolicePistol2: PolicePistol
{
 Inventory.Pickupmessage "Got the Suppressed Police Pistol!"
 Inventory.PickupSound "items/gunspickup"
 Obituary "%o was put down by %k's suppressed pistol."
 Tag "Suppressed Pistol"
 Inventory.Icon "590GB0"
 +AMMO_CHECKBOTH
 +NOALERT
 +NOAUTOFIRE
 +DROPPED
 scale 0.7
 States
 {
 Ready:
  SWSG B 0 a_JumpIfInventory("lightlit",1,"Readylamp")
  SWSG B 0 a_JumpIfInventory("PistolLoaded",1,"LoadedReady")
  SWSG B 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
  Loop
 LoadedReady:
  SWSG A 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
  Loop
 ReadyLamp:
     SWSG D 0 a_JumpIfInventory("Pistolloaded",1,"readylamploaded")
	 SWSG D 0 a_JumpIfInventory("batteries",1,2)
	 SWSG D 0 a_jump(256,"Unlight")
	 SWSG D 0 a_light2
     SWSG D 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
     SWSG D 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
     SWSG D 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
     loop
 ReadyLampLoaded:
	 SWSG C 0 a_JumpIfInventory("batteries",1,2)
	 SWSG C 0 a_jump(256,"Unlight")
	 SWSG C 0 a_light2
     SWSG C 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
     SWSG C 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
     SWSG C 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
     loop
 Deselect:
  "----" #  0 A_LIGHT0
  "----" #  0 A_lower
  "----" #  1 A_Lower
  Loop
 Select:
   TNT1 A 0 A_takeInventory("PolicePistol")
  TNT1 A 0 A_takeInventory("flashlit")
  SWSG B 0 a_JumpIfInventory("PistolLoaded",12,"CheetReset")
  SWSG B 0 a_JumpIfInventory("pistolloaded",1,"Loadedselect")
  SWSG B 1 A_Raise
  SWSG B 0 A_Raise
  Loop
  CheetReset:
	SWSG B 0 A_takeinventory("PistolLoaded",25)
	SWSG B 0 A_giveinventory("PistolLoaded",11)
	SWSG B 0 a_JumpIfInventory("pistolloaded",1,"Loadedselect")
	SWSG B 1 A_Raise
	SWSG B 0 A_Raise
	Loop
 LoadedSelect:
  SWSG A 1 A_Raise
  SWSG A 0 A_Raise
  Loop
 Fire:
  SWSG A 0 a_JumpIfInventory("lightlit",1,"FireLamp")
  SWSG A 0 a_JumpIfInventory("pistolloaded",1,"FireReal")
  Goto Reload
 Firelamp:
  SWSG A 0 a_JumpIfInventory("pistolloaded",1,"FireLampReal")
  Goto Reload
 FireReal:
  TNT1 A 0 A_JumpIfInventory("pistolloaded",1,1)
  Goto Empty
 FireReal1:
  SWSG A 0 A_gunflash
  SWSG A 0 A_PlayWeaponSound("weapons/pistolSuppressed")
  SWSF A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(1,1,-1,10,"hitpuff")
  SWSF B 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SWSF A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
  TNT1 A 0 A_Light0
  SWSF C 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_AlertMonsters(128)
  TNT1 A 0 a_JumpIfInventory("pistolloaded",1,3)
  SWSF E 2 A_PlaySound("weapons/dryfire", CHAN_ITEM)
  SWSG B 1 a_refire("empty")
  goto ready
  SWSF D 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SWSG A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SWSG A 0 a_refire("firereal")
  goto ready
 FirelampReal:
  SWSG C 0 A_gunflash("lampFlash")
  SWSG C 0 A_PlayWeaponSound("weapons/pistolSuppressed")
  SWSO J 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(1.2,1.2,-1,10,"hitpuff")
  SWSO K 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SWSO K 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
  SWSO L 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_AlertMonsters(128)
   TNT1 A 0 a_JumpIfInventory("pistolloaded",1,3)
  SWSO N 2 BRIGHT A_PlaySound("weapons/dryfire", CHAN_ITEM)
  SWSG D 1 BRIGHT a_refire("emptylamp")
  goto readylamp
  SWSO M 2 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SWSG C 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SWSG C 0 a_refire("firelampreal")
  goto readylamp
 empty:
  TNT1 A 0 A_PlaySound("weapons/dryfire", CHAN_ITEM)
 empty2:
  SWSG B 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SWSG B 0 a_refire("empty2")
  goto ready
 emptylamp:
  TNT1 A 0 A_PlaySound("weapons/dryfire", CHAN_ITEM)
  emptylamp2:
  SWSG D 2  BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SWSG D 0  a_refire("emptylamp2")
  goto readylamp
 Reload:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"ReloadLamp")
		TNT1 A 0 A_JumpIfInventory("pistolloaded",11,"Ready")
		TNT1 A 0 A_jumpifinventory("pistolloaded",1,"reloadchamber")
		SWSG B 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"Work1")
        Goto Ready
  ReloadLamp:
        TNT1 A 0 A_jumpifinventory("pistolloaded",1,"reloadlamp2")
        SWSG D 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		SWSG D 0 A_JumpIfInventory("pistolloaded",11,"Readylamp")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp")
        Goto Readylamp
  ReloadLamp2:
        SWSG C 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		SWSG C 0 A_JumpIfInventory("pistolloaded",11,"Readylamp")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp2")
        Goto Readylamp
 ReloadChamber:
		SWSG A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"Work2")
        Goto Ready
 lampChamber:
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp2")
        Goto Readylamp
 droplamp:
        SWSE X 2 BRIGHT a_playsound("items/flashlighton")
	    SWSE Y 2 A_takeinventory("lightlit",1)
	    SWSE Z 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 2 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSE DEFGH 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSE IJK 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		SWSE L 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSE M 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		goto reloadloop3
 droplamp2:
        SWSR X 2 BRIGHT a_playsound("items/flashlighton")
	    SWSR Y 2 A_takeinventory("lightlit",1)
	    SWSR Z 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 2 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSR DEFGH 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSR IJK 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		SWSR L 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSR M 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		goto reloadloop4
	Work1:
	    SWSE A 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		SWSE BC 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 3
		SWSE DEFGHIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		SWSE K 4 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSE LM 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop")
		goto reloaddone
	work1b://fake reload
		TNT1 A 3
		SWSE DEFGHIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		SWSE K 4 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSE LM 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop")
		goto reloaddone
	Work2:
	    SWSR A 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		SWSR BC 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 3
		SWSR DEFGHIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		SWSR K 4 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSR LM 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop2")
		goto reloaddone2
	work2b: //fake reload
		TNT1 A 3
		SWSR D 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSH EFGHIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		SWSH K 4 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSR LM 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop2")
		goto reloaddone2
	ReloadLoop:
		TNT1 A 0 a_JumpIfInventory("pistolloaded",10,"ReloadDone")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_Giveinventory("pistolloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop")
        Goto ReloadDone
	ReloadLoop2:
		TNT1 A 0 a_JumpIfInventory("pistolloaded",11,"ReloadDone2")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_Giveinventory("pistolloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop2")
        Goto ReloadDone2
	ReloadLoop3:
		TNT1 A 0 a_JumpIfInventory("pistolloaded",10,"ReloadDone3")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_Giveinventory("pistolloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop3")
        Goto ReloadDone3
	ReloadLoop4:
		TNT1 A 0 a_JumpIfInventory("pistolloaded",11,"ReloadDone4")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_Giveinventory("pistolloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop4")
        Goto ReloadDone4
	ReloadDone:
		SWSE NOPQR 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSE SSSTUV 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 2 
		SWSR CBA 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		Goto Ready
	ReloadDone2:
		SWSR NOPQRSS 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSR TUV 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 2 
		SWSR CBA 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		Goto Ready
	ReloadDone3:
		SWSE NOPQR 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSE SSSTUV 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 2 
		SWSR CB 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSO EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSO H 1 a_playsound("items/flashlighton")
		SWSO I 1 A_giveinventory("lightlit",1)
		Goto Ready
	ReloadDone4:
		SWSR NOPQRSS 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSR TUV 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 2 
		SWSR CB 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSO EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SWSO H 1 a_playsound("items/flashlighton")
		SWSO I 1 A_giveinventory("lightlit",1)
		Goto Ready
  ZOOM:
	TNT1 A 0 a_JumpIfInventory("lightlit",1,"unlight")
	goto light
  unlight:
	TNT1 A 0 A_JumpIfInventory("PistolLoaded",1,"unlightLoaded")
	SWSO W 1 a_playsound("items/flashlighton")
	TNT1 A 0 A_Light0
	SWSO V 2 A_takeinventory("lightlit",1)
	SWSO UT 2
	SWSO S 1  a_playsound("weapons/pistolup")
    SWSO RQP 1  
	SWSO O 1 
    goto ready
  unlightloaded:
	SWSO I 1 a_playsound("items/flashlighton")
	SWSO H 2 A_takeinventory("lightlit",1)
	TNT1 A 0 A_Light0
	SWSO FG 2
	SWSO E 1  a_playsound("weapons/pistolup")
    SWSO DCB 1  
	SWSO A 1 A_takeinventory("lightlit",1)
    goto ready
  Light:
    SWSO O 0 A_JumpIfInventory("PistolLoaded",1,"LightLoaded")
	SWSO O 2 a_playsound("weapons/pistolup")
	SWSO PQRST 2 
	SWSO U 2 a_playsound("items/flashlighton")
	SWSO VW 2 
	TNT1 A 0 A_giveinventory("lightlit",1) 
    goto readylamp
   LightLoaded:
	SWSO A 2 a_playsound("weapons/pistolup")
	SWSO BCDEF 2 
	SWSO G 1 a_playsound("items/flashlighton")
	SWSO HI 1
	TNT1 A 0 A_giveinventory("lightlit",1) 
    goto readylamp
  USer1:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"LightMelee")
		TNT1 A 0 A_JumpIfInventory("PistolLoaded",1,"punchLoaded")
        SWSE ABC 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		SWSE CBA 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
  PunchLoaded:
        SWSR ABC 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		SWSR CBA 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
   FLASH:
        TNT1 A 2
		goto lightdone
  lampFlash:
        TNT1 A 2
		goto lightdone
 Spawn:
       590P B 10
       590P B 1 bright
		loop
 }
}
actor PolicePistol3: PolicePistol
{
 Inventory.Pickupmessage "Got the Hush Puppy!"
 Inventory.PickupSound "items/gunspickup"
 Obituary "%o was put down by %k's Hush Puppy."
 Tag "Hush Puppy"
 Inventory.Icon "590GC0"
 +AMMO_CHECKBOTH
 +NOALERT
 +NOAUTOFIRE
 +DROPPED
 scale 0.7
 States
 {
 Ready:
  SDSG B 0 a_JumpIfInventory("lightlit",1,"Readylamp")
  SDSG B 0 a_JumpIfInventory("PistolLoaded",1,"LoadedReady")
  SDSG B 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
  Loop
 LoadedReady:
  SDSG A 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
  Loop
 ReadyLamp:
     SDSG D 0 a_JumpIfInventory("Pistolloaded",1,"readylamploaded")
	 SDSG D 0 a_JumpIfInventory("batteries",1,2)
	 SDSG D 0 a_jump(256,"Unlight")
	 SDSG D 0 a_light2
     SDSG D 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
     SDSG D 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
     SDSG D 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
     loop
 ReadyLampLoaded:
	 SDSG C 0 a_JumpIfInventory("batteries",1,2)
	 SDSG C 0 a_jump(256,"Unlight")
	 SDSG C 0 a_light2
     SDSG C 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
     SDSG C 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
     SDSG C 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_allowZOOM|WRF_ALLOWUSER1|WRF_ALLOWUSER1)
     loop
 Deselect:
  "----" #  0 A_LIGHT0
  "----" #  0 A_lower
  "----" #  1 A_Lower
  Loop
 Select:
  TNT1 A 0 A_takeInventory("flashlit")
  TNT1 A 0 A_takeInventory("PolicePistol")
   TNT1 A 0 A_takeInventory("PolicePistol2")
  SDSG B 0 a_JumpIfInventory("pistolloaded",1,"Loadedselect")
  SDSG B 1 A_Raise
  SDSG B 0 A_Raise
  Loop
 LoadedSelect:
  SDSG A 1 A_Raise
  SDSG A 0 A_Raise
  Loop
 Fire:
  SDSG A 0 a_JumpIfInventory("lightlit",1,"FireLamp")
  SDSG A 0 a_JumpIfInventory("pistolloaded",1,"FireReal")
  Goto Reload
 Firelamp:
  SDSG A 0 a_JumpIfInventory("pistolloaded",1,"FireLampReal")
  Goto Reload
 FireReal:
  TNT1 A 0 A_JumpIfInventory("pistolloaded",1,1)
  Goto Empty
 FireReal1:
  SDSG A 0 A_gunflash
  SDSG A 0 A_PlayWeaponSound("weapons/pistolSuppressed")
  SDSF A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(1,1,-1,10,"hitpuff")
  SDSF B 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SDSF A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
  TNT1 A 0 A_Light0
  SDSF C 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_AlertMonsters(128)
  TNT1 A 0 a_JumpIfInventory("pistolloaded",1,3)
  SDSF E 2 A_PlaySound("weapons/dryfire", CHAN_ITEM)
  SDSG B 1 a_refire("empty")
  goto ready
  SDSF D 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SDSG A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SDSG A 0 a_refire("firereal")
  goto ready
 FirelampReal:
  SDSG C 0 A_gunflash("lampFlash")
  SDSG C 0 A_PlayWeaponSound("weapons/pistolSuppressed")
  SDSO J 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(1.2,1.2,-1,10,"hitpuff")
  SDSO K 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SDSO K 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
  SDSO L 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_AlertMonsters(128)
   TNT1 A 0 a_JumpIfInventory("pistolloaded",1,3)
  SDSO N 2 BRIGHT A_PlaySound("weapons/dryfire", CHAN_ITEM)
  SDSG D 1 BRIGHT a_refire("emptylamp")
  goto readylamp
  SDSO M 2 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SDSG C 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SDSG C 0 a_refire("firelampreal")
  goto readylamp
 empty:
  TNT1 A 0 A_PlaySound("weapons/dryfire", CHAN_ITEM)
 empty2:
  SDSG B 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SDSG B 0 a_refire("empty2")
  goto ready
 emptylamp:
  TNT1 A 0 A_PlaySound("weapons/dryfire", CHAN_ITEM)
  emptylamp2:
  SDSG D 2  BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  SDSG D 0  a_refire("emptylamp2")
  goto readylamp
 Reload:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"ReloadLamp")
		TNT1 A 0 A_JumpIfInventory("pistolloaded",25,"Ready")
		TNT1 A 0 A_jumpifinventory("pistolloaded",1,"reloadchamber")
		SDSG B 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"Work1")
        Goto Ready
  ReloadLamp:
        TNT1 A 0 A_jumpifinventory("pistolloaded",1,"reloadlamp2")
        SDSG D 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		SDSG D 0 A_JumpIfInventory("pistolloaded",25,"Readylamp")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp")
        Goto Readylamp
  ReloadLamp2:
        SDSG C 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		SDSG C 0 A_JumpIfInventory("pistolloaded",25,"Readylamp")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp2")
        Goto Readylamp
 ReloadChamber:
		SDSG A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"Work2")
        Goto Ready
 lampChamber:
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp2")
        Goto Readylamp
 droplamp:
        SDSE X 2 BRIGHT a_playsound("items/flashlighton")
	    SDSE Y 2 A_takeinventory("lightlit",1)
	    SDSE Z 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 2 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSE DEFGH 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSE IJK 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		SDSE L 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSE M 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		goto reloadloop3
 droplamp2:
        SDSR X 2 BRIGHT a_playsound("items/flashlighton")
	    SDSR Y 2 A_takeinventory("lightlit",1)
	    SDSR Z 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 2 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSR DEFGH 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSR IJK 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		SDSR L 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSR M 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		goto reloadloop4
	Work1:
	    SDSE A 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		SDSE BC 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 3
		SDSE DEFGHIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		SDSE K 4 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSE LM 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop")
		goto reloaddone
	work1b://fake reload
		TNT1 A 3
		SDSE DEFGHIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		SDSE K 4 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSE LM 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop")
		goto reloaddone
	Work2:
	    SDSR A 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		SDSR BC 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 3
		SDSR DEFGHIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		SDSR K 4 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSR LM 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop2")
		goto reloaddone2
	work2b: //fake reload
		TNT1 A 3
		SDSR D 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSH EFGHIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		SDSH K 4 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSR LM 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop2")
		goto reloaddone2
	ReloadLoop:
		TNT1 A 0 a_JumpIfInventory("pistolloaded",24,"ReloadDone")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_Giveinventory("pistolloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop")
        Goto ReloadDone
	ReloadLoop2:
		TNT1 A 0 a_JumpIfInventory("pistolloaded",25,"ReloadDone2")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_Giveinventory("pistolloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop2")
        Goto ReloadDone2
	ReloadLoop3:
		TNT1 A 0 a_JumpIfInventory("pistolloaded",24,"ReloadDone3")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_Giveinventory("pistolloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop3")
        Goto ReloadDone3
	ReloadLoop4:
		TNT1 A 0 a_JumpIfInventory("pistolloaded",25,"ReloadDone4")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_Giveinventory("pistolloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop4")
        Goto ReloadDone4
	ReloadDone:
		SDSE NOPQR 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSE SSSTUV 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 2 
		SDSR CBA 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		Goto Ready
	ReloadDone2:
		SDSR NOPQRSS 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSR TUV 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 2 
		SDSR CBA 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		Goto Ready
	ReloadDone3:
		SDSE NOPQR 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSE SSSTUV 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 2 
		SDSR CB 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSO EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSO H 1 a_playsound("items/flashlighton")
		SDSO I 1 A_giveinventory("lightlit",1)
		Goto Ready
	ReloadDone4:
		SDSR NOPQRSS 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSR TUV 2 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		TNT1 A 2 
		SDSR CB 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSO EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWUSER1)
		SDSO H 1 a_playsound("items/flashlighton")
		SDSO I 1 A_giveinventory("lightlit",1)
		Goto Ready
  ZOOM:
	TNT1 A 0 a_JumpIfInventory("lightlit",1,"unlight")
	goto light
  unlight:
	TNT1 A 0 A_JumpIfInventory("PistolLoaded",1,"unlightLoaded")
	SDSO W 1 a_playsound("items/flashlighton")
	TNT1 A 0 A_Light0
	SDSO V 2 A_takeinventory("lightlit",1)
	SDSO UT 2
	SDSO S 1  a_playsound("weapons/pistolup")
    SDSO RQP 1  
	SDSO O 1 
    goto ready
  unlightloaded:
	SDSO I 1 a_playsound("items/flashlighton")
	SDSO H 2 A_takeinventory("lightlit",1)
	TNT1 A 0 A_Light0
	SDSO FG 2
	SDSO E 1  a_playsound("weapons/pistolup")
    SDSO DCB 1  
	SDSO A 1 A_takeinventory("lightlit",1)
    goto ready
  Light:
    SDSO O 0 A_JumpIfInventory("PistolLoaded",1,"LightLoaded")
	SDSO O 2 a_playsound("weapons/pistolup")
	SDSO PQRST 2 
	SDSO U 2 a_playsound("items/flashlighton")
	SDSO VW 2 
	TNT1 A 0 A_giveinventory("lightlit",1) 
    goto readylamp
   LightLoaded:
	SDSO A 2 a_playsound("weapons/pistolup")
	SDSO BCDEF 2 
	SDSO G 1 a_playsound("items/flashlighton")
	SDSO HI 1
	TNT1 A 0 A_giveinventory("lightlit",1) 
    goto readylamp
  USer1:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"LightMelee")
		TNT1 A 0 A_JumpIfInventory("PistolLoaded",1,"punchLoaded")
        SDSE ABC 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		SDSE CBA 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
  PunchLoaded:
        SDSR ABC 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		SDSR CBA 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
   FLASH:
        TNT1 A 2
		goto lightdone
  lampFlash:
        TNT1 A 2
		goto lightdone
 Spawn:
       590P C 10
       590P C 1 bright
		loop
 }
}