ACTOR MusketLoaded : Ammo
{
 Inventory.MaxAmount 3
 Ammo.BackPackMaxAmount 3
 +IGNORESKILL
}
Actor ScopeCheck: Inventory
{
   Inventory.MaxAmount 1
}
Actor DriverCharge: Inventory
{
   Inventory.MaxAmount 30
}
ACTOR MusketSpawn : CustomInventory
{
	Inventory.Amount 0
	scale 0.6
	Inventory.Icon "MUSGA0"
	Inventory.PickupMessage "Got the Junker Musket!"
	Inventory.PickupSound "items/gunspickup"
	States
	{
	Spawn:
		MKTP A 10
		MKTP A 1 bright
		loop
	Pickup:
	    TNT1 A 0 A_JumpIfInventory("Junkermusket3", 1, 4) //Skips giving you the normal musket if you have the upgrade
		TNT1 A 0 A_JumpIfInventory("Junkermusket2", 1, 3) //Skips giving you the normal musket if you have the upgrade
		TNT1 A 0 A_GiveInventory("JunkerMusket")
		TNT1 A 0 A_Jump(256, 2)
		TNT1 A 0 A_GiveInventory("SlugAmmo", 6)
		TNT1 A 0
		Stop
	}
}
ACTOR MusketBuild2 : CustomInventory
{
	Inventory.Amount 0
	scale 0.7
	Inventory.Icon "MKTPA0"
	+DROPPED
	States
	{
	Spawn:
		MKTP A 10
		loop
	Pickup:
		TNT1 A 0 A_GiveInventory("junkermusket2")
		TNT1 A 0 A_takeInventory("junkermusket")
		TNT1 A 0 A_PlaySound("special/workbench",CHAN_ITEM)
		TNT1 A 0
		Stop
	}
}
ACTOR MusketBuild3 : CustomInventory
{
	Inventory.Amount 0
	scale 0.7
	Inventory.Icon "MKTPA0"
	+DROPPED
	States
	{
	Spawn:
		MKTP A 10
		loop
	Pickup:
		TNT1 A 0 A_GiveInventory("junkermusket3")
		TNT1 A 0 A_takeInventory("junkermusket")
		TNT1 A 0 A_takeInventory("junkermusket2")
		TNT1 A 0 A_PlaySound("special/workbench",CHAN_ITEM)
		TNT1 A 0
		Stop
	}
}
actor JunkerMusket: Weapon 
{
 Weapon.SelectionOrder 100
 Weapon.AmmoUse1 1
 Weapon.AmmoUse2 1
 Weapon.AmmoGive2 6
 Weapon.AmmoType2 "slugammo"
 Weapon.AmmoType1 "musketloaded"
 weapon.slotnumber 8
 Inventory.Pickupmessage "Got the Junker Musket!"
 Tag "Junker Musket"
 Inventory.PickupSound "items/gunspickup"
 Obituary "%o was picked off by %k."
   Weapon.BobStyle Alpha
	Weapon.BobSpeed 1.5
	Weapon.BobRangeX .2
	Weapon.BobRangeY .5
 weapon.upsound "weapons/m16up"
 Inventory.Icon "MUSGA0"
 +AMMO_CHECKBOTH
 +NOALERT
 +NOAUTOFIRE
 +BLOODSPLATTER
 +NOAUTOAIM
 scale 0.6
 States
 {
 Ready:
  MSKT A 0 A_JumpIfInventory("Scopecheck",1,"ReadyZoomed")
  MSKT A 0 A_JumpIfInventory("MusketLoaded",1,"ReadyLoaded")
  MSKT B 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWUSER1|WRF_ALLOWZOOM)
  Loop
 ReadyZoomed:
  SHTG A 0 A_ZoomFactor(4)
  MSKT V 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWUSER1|WRF_ALLOWZOOM)
  Goto Ready
 ReadyLoaded:
  MSKT A 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWUSER1|WRF_ALLOWZOOM)
  Goto Ready
 Deselect:
  TNT1 A 0 A_TakeInventory("Scopecheck",1)
  TNT1 A 0 A_ZoomFactor(1)
  MSKT A 0 A_lower
  MSKT A 1 A_Lower
  Loop
 Select:
  TNT1 A 0 A_takeInventory("flashlit")
  MSKT A 1 A_Raise
  MSKT A 0 A_Raise
  MSKT A 0 a_JumpIfInventory("musketLoaded",2,"CheetReset")
  Loop
  CheetReset:
    MSKT A 1 A_Raise
	MSKT A 0 A_takeinventory("musketLoaded",3)
	MSKT A 0 A_giveinventory("musketLoaded",1)
	MSKT A 0 A_Raise
	Loop
 Fire:
  "----"  # 0 a_JumpIfInventory("MusketLoaded",1,"FireReal")
  Goto Reload
 FireReal:
  SHTG A 0 A_JumpIfInventory("Scopecheck",1,"FireZoomed")
  MSKF A 1 BRIGHT A_PlayWeaponSound("weapons/rifleshot")
  TNT1 AAAA 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  MSKF B 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-1)
  TNT1 A 0 A_PlaySound("weapons/rifledistant",3)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(1,1,1,150,"musketpuff",FBF_USEAMMO|FBF_NORANDOM)
  MSKF CD 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-2)
  TNT1 A 0 A_Light0
  MSKF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  MSKF H 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MSKF I 2 A_WeaponReady(WRF_NOSECONDARY|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MSKF J 2 A_WeaponReady(WRF_NOSECONDARY|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  TNT1 A 0 A_AlertMonsters
  TNT1 A 0 A_checkreload
  MSKT B 1 a_refire
  goto ready
 FireZoomed:
  MSKT V 1 A_PlayWeaponSound("weapons/rifleshot")
  TNT1 AAAA 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  MSKT V 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_FireBullets(1,1,1,150,"musketpuff",FBF_USEAMMO|FBF_NORANDOM)
  TNT1 A 0 A_SetPitch(Pitch-1)
  TNT1 A 0 A_PlaySound("weapons/rifledistant",3)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,0,0)
  MSKT V 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-2)
  TNT1 A 0 A_Light0
  MSKT VVV 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  MSKT V 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MSKT V 2 A_WeaponReady(WRF_NOSECONDARY|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MSKT V 2 A_WeaponReady(WRF_NOSECONDARY|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  TNT1 A 0 A_AlertMonsters
  TNT1 A 0 A_checkreload
  MSKT V 1 a_refire
  goto ready
 Reload:
		"----"  # 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("musketLoaded",1,"Ready")
        TNT1 A 0 A_JumpIfInventory("slugammo",1,"Work1")
        Goto Ready
	Work1:
        TNT1 A 0 A_ZoomFactor(1)
		MSKT CDE 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH) 
		MSKT FGHI 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		MSKT JKKL 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_FireCustomMissile("slugCasingSpawner",0,0,-5)
		TNT1 A 0 A_PlaySound("weapons/musketopen",CHAN_7)
		MSKT MMNO 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		MSKT O 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		MSKT PQRSS 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_Giveinventory("musketloaded",1)
		TNT1 A 0 A_TakeInventory("slugammo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 A_PlaySound("weapons/musketclose",CHAN_7)
		MSKT JIH 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		MSKT GFYXW 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		Goto Ready
   Altfire:
        MSKT A 0 A_JumpIfInventory("Scopecheck",1,"UnZoom")
        MSKT A 0 A_GiveInventory("Scopecheck",1)
        MSKT A 0 A_ZoomFactor(4)
        Goto Ready
    UnZoom:
        MSKT A 0 A_TakeInventory("Scopecheck",1)
        MSKT A 0 A_ZoomFactor(1)
        Goto Ready
	User1:	
	    MSKT WXYZ 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A    3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		MSKT ZYXW 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
	Zoom:
	    MSKT A 0  A_giveinventory("lightlit",1)
	    MSKT A 0  A_SelectWeapon("crowbar")
		MSKT A 0  A_SelectWeapon("crowbar2")
		goto deselect
 Spawn:
        MKTP A 10
		MKTP A 1 bright
		loop
 }
}
actor JunkerMusket2: JunkerMusket
{
 Weapon.AmmoGive2 6
 Inventory.Pickupmessage "Got the Junker Repeater!"
 Tag "Junker Repeater"
 Obituary "%o was picked off by %k."
  +CHEATNOTWEAPON
  Inventory.Icon "MSG2A0"
 States
 {
 Ready:
  MS2T A 0 A_JumpIfInventory("Scopecheck",1,"ReadyZoomed")
  MS2T A 0 A_JumpIfInventory("MusketLoaded",1,"ReadyLoaded")
  MS2T B 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWUSER1|WRF_ALLOWZOOM)
  Loop
 ReadyZoomed:
  MS2T A 0 A_ZoomFactor(4)
  MSKT V 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWUSER1|WRF_ALLOWZOOM)
  Goto Ready
 ReadyLoaded:
  MS2T A 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWUSER1|WRF_ALLOWZOOM)
  Goto Ready
 Deselect:
  TNT1 A 0 A_TakeInventory("Scopecheck",1)
  TNT1 A 0 A_ZoomFactor(1)
  MS2T A 0 A_lower
  MS2T A 1 A_Lower
  Loop
 Select:
  TNT1 A 0 A_takeInventory("flashlit")
  TNT1 A 0 A_TakeInventory("JunkerMusket",1)
  MS2T A 1 A_Raise
  MS2T A 0 A_Raise
  Loop
 Fire:
  "----"  # 0 a_JumpIfInventory("MusketLoaded",1,"FireReal")
  Goto Reload
 FireReal:
  MS2T A 0 A_JumpIfInventory("Scopecheck",1,"FireZoomed")
  MS2F A 1 BRIGHT A_PlayWeaponSound("weapons/rifleshot")
  TNT1 AAAA 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  MS2F B 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-1)
  TNT1 A 0 A_PlaySound("weapons/rifledistant",3)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(1,1,1,150,"musketpuff",FBF_USEAMMO|FBF_NORANDOM)
  MS2F CD 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-2)
  TNT1 A 0 A_Light0
  MS2F EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  MS2F H 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MS2F I 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MS2F J 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  TNT1 A 0 A_AlertMonsters
  TNT1 A 0 A_checkreload
   "----"  # 0 a_JumpIfInventory("MusketLoaded",1,"recock")
  goto ready
 Recock:
  MS2C A 2 A_WeaponReady(WRF_NOFIRE)
  MS2C A 0 A_PlaySound("weapons/musketlever",3)
  MS2C B 2 A_WeaponReady(WRF_NOFIRE)
  MS2C C 2 A_Weaponready(WRF_NOFIRE)
  MS2C D 2 A_Weaponready(WRF_NOFIRE)
  TNT1 A 0 A_FireCustomMissile("slugCasingSpawner",0,0,10,-5)
  MS2C E 4 A_Weaponready(WRF_NOFIRE)
  MS2C F 2 A_Weaponready(WRF_NOFIRE|WRF_ALLOWUSER1)
  MS2C G 2 A_Weaponready(WRF_NOFIRE|WRF_ALLOWUSER1)
  MS2C H 2 A_Weaponready(WRF_NOFIRE|WRF_ALLOWUSER1)
  goto ready
  
 FireZoomed:
  MSKT V 1 A_PlayWeaponSound("weapons/rifleshot")
  TNT1 AAAA 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  MSKT V 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_FireBullets(1,1,1,150,"musketpuff",FBF_USEAMMO|FBF_NORANDOM)
  TNT1 A 0 A_SetPitch(Pitch-1)
  TNT1 A 0 A_PlaySound("weapons/rifledistant",3)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,0,0)
  MSKT V 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-2)
  TNT1 A 0 A_Light0
  MSKT VVV 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  MSKT V 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MSKT V 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MSKT V 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  TNT1 A 0 A_AlertMonsters
    "----"  # 0 a_JumpIfInventory("MusketLoaded",1,"recockzoomed")
  goto ready
 Recockzoomed:
  MSKT V 1 A_WeaponReady(WRF_NOFIRE)
  MSKT V 1 A_SetPitch(Pitch-0.5)
  MSKT V 0 A_PlaySound("weapons/musketlever",3)
  MSKT V 1 A_SetPitch(Pitch-0.5)
  MSKT V 2 A_Weaponready(WRF_NOFIRE)
  MSKT V 2 A_SetPitch(Pitch-1)
  MSKT V 0 A_FireCustomMissile("slugCasingSpawner",0,0,10,-5)
  MSKT V 2 A_SetPitch(Pitch+1)
  MSKT V 2 A_SetPitch(Pitch+1)
  MSKT V 2 A_Weaponready(WRF_NOFIRE)
  MSKT V 2 A_SetPitch(Pitch+1)
  MSKT V 2 A_Weaponready(WRF_NOFIRE)
  goto ready
 Reload:
		"----"  # 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("musketLoaded",3,"Ready")
        TNT1 A 0 A_JumpIfInventory("slugammo",1,"Work1")
        Goto Ready
	Work1:
        TNT1 A 0 A_ZoomFactor(1)
		MS2T BCDE 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH) 
		TNT1 A 3 A_WEAPONREADY(WRF_NOFIRE|WRF_NOSWITCH)
		MS2T FGHI 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		MS2T I 0 A_PlaySound("weapons/musketopen",CHAN_7)
		MS2T JKKL 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		MS2T MNO 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		MS2T PPPPPPPONML 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		MS2T K 0 A_PlaySound("weapons/musketopen", CHAN_7)
		MS2T KKJI 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	Loadloop:
	    TNT1 A 0 a_JumpIfInventory("musketLoaded",3,"loadDone")
		TNT1 A 0 A_Giveinventory("musketloaded",1)
		TNT1 A 0 A_TakeInventory("slugammo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 a_JumpIfInventory("slugAmmo",1,"loadloop")
		goto loaddone
	LoadDone:
		MS2T IH 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		MS2T GFEDCBA 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		Goto Recock
   Altfire:
        SHTG A 0 A_JumpIfInventory("Scopecheck",1,"UnZoom")
        SHTG A 0 A_GiveInventory("Scopecheck",1)
        SHTG A 0 A_ZoomFactor(4)
        Goto Ready
    UnZoom:
        TNT1 A 0 A_TakeInventory("Scopecheck",1)
        TNT1 A 0 A_ZoomFactor(1)
        Goto Ready
	User1:	
	    MS2T WXYZ 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A    3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		MS2T ZYXW 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
	Zoom:
	    MS2T A 0  A_giveinventory("lightlit",1)
	    MS2T A 0  A_SelectWeapon("crowbar")
		MS2T A 0  A_SelectWeapon("crowbar2")
		goto deselect
 Spawn:
  MK2P A 10
		MK2P A 1 bright
		loop
 }
}
actor JunkerMusket3: JunkerMusket
{
 Weapon.AmmoGive2 6
 Inventory.Pickupmessage "Got the Junker Driver!"
 Tag "Junker Driver"
 Obituary "%o was erased by by %k."
  +CHEATNOTWEAPON
  Inventory.Icon "MSG2A0"
 States
 {
 Ready:
  MS3T A 0 A_JumpIfInventory("Scopecheck",1,"ReadyZoomed")
  MS3T A 0 A_JumpIfInventory("MusketLoaded",1,"ReadyLoaded")
  MS3T B 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWUSER1|WRF_ALLOWZOOM)
  Loop
 ReadyZoomed:
  MVLT A 0 A_ZoomFactor(4)
  MVLT A 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWUSER1|WRF_ALLOWZOOM)
  Goto Ready
 ReadyLoaded:
  MS3T A 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWUSER1|WRF_ALLOWZOOM)
  Goto Ready
 Deselect:
  TNT1 A 0 A_TakeInventory("drivercharge", 40)
  TNT1 A 0 A_TakeInventory("Scopecheck",1)
  TNT1 A 0 A_ZoomFactor(1)
  MS3T A 0 A_lower
  MS3T A 1 A_Lower
  Loop
 Select:
  TNT1 A 0 A_takeInventory("flashlit")
  TNT1 A 0 A_TakeInventory("JunkerMusket",1)
  TNT1 A 0 A_TakeInventory("JunkerMusket2",1)
  MS3T A 1 A_Raise
  MS3T A 0 A_Raise
  Loop
 Fire:
  "----"  # 0 a_JumpIfInventory("MusketLoaded",1,"FireReal")
  Goto Reload
 FireReal:
  TNT1 A 0 A_TakeInventory("drivercharge", 40)
  MS3T A 0 A_JumpIfInventory("Scopecheck",1,"FireZoomed")
  MS3T A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 1 A_ReFire
  MS3F A 1 BRIGHT A_PlayWeaponSound("weapons/rifleshot")
  TNT1 AAAA 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  MS3F B 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-1)
  TNT1 A 0 A_PlaySound("weapons/rifledistant",3)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(1,1,1,150,"musketpuff",FBF_USEAMMO|FBF_NORANDOM)
  MS3F CD 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-2)
  TNT1 A 0 A_Light0
  MS3F EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  MS3F H 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MS3F I 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MS3F J 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  TNT1 A 0 A_AlertMonsters
  TNT1 A 0 A_checkreload
   "----"  # 0 a_JumpIfInventory("MusketLoaded",1,"recock")
  goto ready
  Hold:
        MS3H A 0 a_jumpifinventory("Scopecheck",1,"HoldZoomed")
        MS3H A 1 A_PlayWeaponSound("weapons/musketcharge")
  Charge1:
	    "----"  # 2 A_WeaponReady(WRF_ALLOWUSER1)
		"----"  # 0 A_giveinventory("drivercharge",1)
		"----"  # 0 a_refire("checkcharge")
		goto fireweak
  Charge2:
	    "----"  # 2 A_WeaponReady(WRF_ALLOWUSER1)
		"----"  # 0 A_giveinventory("drivercharge",1)
		"----"  # 0 a_refire("checkcharge")
		goto firemedium
  Charge3:
	    "----"  # 2 A_WeaponReady(WRF_ALLOWUSER1)
		"----"  # 0 A_giveinventory("drivercharge",1)
		"----"  # 0 a_refire("checkcharge")
		goto firestrong
 Charge4:
	    "----"  # 2 A_WeaponReady(WRF_ALLOWUSER1)
		"----"  # 0 A_giveinventory("drivercharge",1)
		"----"  # 0 a_refire("checkcharge")
		goto firemega
 CheckCharge:
        "----"  # 0 
		MS3H  J 0 a_jumpifinventory("drivercharge", 27,"charge4")
		MS3H  I 0 a_jumpifinventory("drivercharge", 24,"charge3")
		MS3H  H 0 a_jumpifinventory("drivercharge", 21,"charge3")
		MS3H  G 0 a_jumpifinventory("drivercharge", 18,"charge2")
		MS3H  F 0 a_jumpifinventory("drivercharge", 15,"charge2")
		MS3H  E 0 a_jumpifinventory("drivercharge", 12,"charge2")
		MS3H  D 0 a_jumpifinventory("drivercharge", 9,"charge1")
		MS3H  C 0 a_jumpifinventory("drivercharge", 6,"charge1")
		MS3H  B 0 a_jumpifinventory("drivercharge", 3,"charge1")
		MS3H  A 0 
		goto charge1

Fireweak:
  TNT1 A 0 A_TakeInventory("drivercharge", 40)
  MS3F A 1 BRIGHT A_PlayWeaponSound("weapons/rifleshot")
  TNT1 AAAA 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  MS3F B 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-1)
  TNT1 A 0 A_PlaySound("weapons/rifledistant",3)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(1,1,1,150,"musketpuff",FBF_USEAMMO|FBF_NORANDOM)
  MS3F CD 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-2)
  TNT1 A 0 A_Light0
  MS3F EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  MS3F H 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MS3F I 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MS3F J 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  TNT1 A 0 A_AlertMonsters
  TNT1 A 0 A_checkreload
   "----"  # 0 a_JumpIfInventory("MusketLoaded",1,"recock")
  goto ready
FireMedium:
  TNT1 A 0 A_TakeInventory("drivercharge", 40)
  MS3F A 1 BRIGHT A_PlayWeaponSound("weapons/riflemedium")
  TNT1 AAAA 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  MS3F B 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-1)
  TNT1 A 0 A_PlaySound("weapons/rifledistant",3)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(1,1,1,150,"driverpuff",FBF_USEAMMO|FBF_NORANDOM)
  TNT1 A 0 A_FireBullets(0,0,-1,50,"musketpuff",FBF_NORANDOM)
  MS3F CD 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-2)
  TNT1 A 0 A_Light0
  MS3F EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  MS3F H 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MS3F I 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MS3F J 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  TNT1 A 0 A_AlertMonsters
  TNT1 A 0 A_checkreload
   "----"  # 0 a_JumpIfInventory("MusketLoaded",1,"recock")
  goto ready  
FireStrong:
  TNT1 A 0 A_TakeInventory("drivercharge", 40)
  MS3F A 1 BRIGHT A_PlayWeaponSound("weapons/riflestrong")
  TNT1 AAAA 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  MS3F B 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-1)
  TNT1 A 0 A_PlaySound("weapons/rifledistant",3)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(1,1,1,150,"driverpuff",FBF_USEAMMO|FBF_NORANDOM)
  TNT1 A 0 A_FireBullets(0,0,-1,50,"driverpuff",FBF_NORANDOM)
  TNT1 A 0 A_FireBullets(0,0,-1,50,"musketpuff",FBF_NORANDOM)
  MS3F CD 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-2)
  TNT1 A 0 A_Light0
  MS3F EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  MS3F H 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MS3F I 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MS3F J 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  TNT1 A 0 A_AlertMonsters
  TNT1 A 0 A_checkreload
   "----"  # 0 a_JumpIfInventory("MusketLoaded",1,"recock")
  goto ready 
FireMega:
  TNT1 A 0 A_TakeInventory("drivercharge", 40)
  MS3F A 1 BRIGHT A_PlayWeaponSound("weapons/riflemega")
  TNT1 AAAA 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  MS3F B 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-1)
  TNT1 A 0 A_PlaySound("weapons/rifledistant",3)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(1,1,1,150,"megapuff",FBF_USEAMMO|FBF_NORANDOM)
  TNT1 A 0 A_FireBullets(0,0,-1,50,"megapuff",FBF_NORANDOM)
  TNT1 A 0 A_FireBullets(0,0,-1,50,"driverpuff",FBF_NORANDOM)
  TNT1 A 0 A_FireBullets(0,0,-1,50,"musketpuff",FBF_NORANDOM)
  MS3F CD 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-2)
  TNT1 A 0 A_Light0
  MS3F EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  MS3F H 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MS3F I 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MS3F J 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  TNT1 A 0 A_AlertMonsters
  TNT1 A 0 A_checkreload
   "----"  # 0 a_JumpIfInventory("MusketLoaded",1,"recock")
  goto ready
	
 Recock:
  MS3C A 2 A_WeaponReady(WRF_NOFIRE)
  MS3C A 0 A_PlaySound("weapons/musketlever",3)
  MS3C B 2 A_WeaponReady(WRF_NOFIRE)
  MS3C C 2 A_Weaponready(WRF_NOFIRE)
  MS3C D 2 A_Weaponready(WRF_NOFIRE)
  TNT1 A 0 A_FireCustomMissile("slugCasingSpawner",0,0,10,-5)
  MS3C E 4 A_Weaponready(WRF_NOFIRE)
  MS3C F 2 A_Weaponready(WRF_NOFIRE|WRF_ALLOWUSER1)
  MS3C G 2 A_Weaponready(WRF_NOFIRE|WRF_ALLOWUSER1)
  MS3C H 2 A_Weaponready(WRF_NOFIRE|WRF_ALLOWUSER1)
  goto ready
  
 FireZoomed:
  TNT1 A 0 A_TakeInventory("drivercharge", 40)
  MVLT A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 1 A_ReFire
  MVLT A 1 A_PlayWeaponSound("weapons/rifleshot")
  TNT1 AAAA 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  MVLT A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_FireBullets(1,1,1,150,"musketpuff",FBF_USEAMMO|FBF_NORANDOM)
  TNT1 A 0 A_SetPitch(Pitch-1)
  TNT1 A 0 A_PlaySound("weapons/rifledistant",3)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,0,0)
  MVLT A 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-2)
  TNT1 A 0 A_Light0
  MVLT AAA 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  MVLT A 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MVLT A 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MVLT A 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  TNT1 A 0 A_AlertMonsters
    "----"  # 0 a_JumpIfInventory("MusketLoaded",1,"recockzoomed")
  goto ready
  Holdzoomed:
        MVLT A 1 A_PlayWeaponSound("weapons/musketcharge")
  zoomed1:
	    "----"  # 2 A_WeaponReady(WRF_ALLOWUSER1)
		"----"  # 0 A_giveinventory("drivercharge",1)
		"----"  # 0 a_refire("zoomedcharge")
		goto zoomedweak
  zoomed2:
	    "----"  # 2 A_WeaponReady(WRF_ALLOWUSER1)
		"----"  # 0 A_giveinventory("drivercharge",1)
		"----"  # 0 a_refire("zoomedcharge")
		goto zoomedmedium
  zoomed3:
	    "----"  # 2 A_WeaponReady(WRF_ALLOWUSER1)
		"----"  # 0 A_giveinventory("drivercharge",1)
		"----"  # 0 a_refire("zoomedcharge")
		goto zoomedstrong
 zoomed4:
	    "----"  # 2 A_WeaponReady(WRF_ALLOWUSER1)
		"----"  # 0 A_giveinventory("drivercharge",1)
		"----"  # 0 a_refire("zoomedcharge")
		goto zoomedmega
 zoomedCharge:
        "----"  # 0 
		MVLT  K 0 a_jumpifinventory("drivercharge", 27,"zoomed4")
		MVLT  J 0 a_jumpifinventory("drivercharge", 24,"zoomed3")
		MVLT  I 0 a_jumpifinventory("drivercharge", 21,"zoomed3")
		MVLT  H 0 a_jumpifinventory("drivercharge", 18,"zoomed2")
		MVLT  G 0 a_jumpifinventory("drivercharge", 15,"zoomed2")
		MVLT  F 0 a_jumpifinventory("drivercharge", 12,"zoomed2")
		MVLT  E 0 a_jumpifinventory("drivercharge", 9,"zoomed1")
		MVLT  D 0 a_jumpifinventory("drivercharge", 6,"zoomed1")
		MVLT  C 0 a_jumpifinventory("drivercharge", 3,"zoomed1")
		MVLT  B 0 
		goto zoomed1
 Zoomedweak:
  TNT1 A 0 A_TakeInventory("drivercharge", 40)
  MVLT A 1 A_PlayWeaponSound("weapons/rifleshot")
  TNT1 AAAA 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  MVLT A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_FireBullets(1,1,1,150,"musketpuff",FBF_USEAMMO|FBF_NORANDOM)
  TNT1 A 0 A_SetPitch(Pitch-1)
  TNT1 A 0 A_PlaySound("weapons/rifledistant",3)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,0,0)
  MVLT A 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-2)
  TNT1 A 0 A_Light0
  MVLT AAA 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  MVLT A 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MVLT A 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MVLT A 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  TNT1 A 0 A_AlertMonsters
    "----"  # 0 a_JumpIfInventory("MusketLoaded",1,"recockzoomed")
  goto ready
   Zoomedmedium:
  TNT1 A 0 A_TakeInventory("drivercharge", 40)
  MVLT A 1 A_PlayWeaponSound("weapons/riflemedium")
  TNT1 AAAA 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  MVLT A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_FireBullets(1,1,1,150,"driverpuff",FBF_USEAMMO|FBF_NORANDOM)
  TNT1 A 0 A_FireBullets(0,0,-1,50,"musketpuff",FBF_NORANDOM)
  TNT1 A 0 A_SetPitch(Pitch-1)
  TNT1 A 0 A_PlaySound("weapons/rifledistant",3)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,0,0)
  MVLT A 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-2)
  TNT1 A 0 A_Light0
  MVLT AAA 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  MVLT A 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MVLT A 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MVLT A 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  TNT1 A 0 A_AlertMonsters
    "----"  # 0 a_JumpIfInventory("MusketLoaded",1,"recockzoomed")
  goto ready
   Zoomedstrong:
  TNT1 A 0 A_TakeInventory("drivercharge", 40)
  MVLT A 1 A_PlayWeaponSound("weapons/riflestrong")
  TNT1 AAAA 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  MVLT A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_FireBullets(1,1,1,150,"driverpuff",FBF_USEAMMO|FBF_NORANDOM)
  TNT1 A 0 A_FireBullets(0,0,-1,50,"driverpuff",FBF_NORANDOM)
  TNT1 A 0 A_FireBullets(0,0,-1,50,"musketpuff",FBF_NORANDOM)
  TNT1 A 0 A_SetPitch(Pitch-1)
  TNT1 A 0 A_PlaySound("weapons/rifledistant",3)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,0,0)
  MVLT A 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-2)
  TNT1 A 0 A_Light0
  MVLT AAA 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  MVLT A 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MVLT A 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MVLT A 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  TNT1 A 0 A_AlertMonsters
    "----"  # 0 a_JumpIfInventory("MusketLoaded",1,"recockzoomed")
  goto ready
   Zoomedmega:
  TNT1 A 0 A_TakeInventory("drivercharge", 40)
  MVLT A 1 A_PlayWeaponSound("weapons/riflemega")
  TNT1 AAAA 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  MVLT A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_FireBullets(1,1,1,150,"megapuff",FBF_USEAMMO|FBF_NORANDOM)
  TNT1 A 0 A_FireBullets(0,0,-1,50,"megapuff",FBF_NORANDOM)
  TNT1 A 0 A_FireBullets(0,0,-1,50,"driverpuff",FBF_NORANDOM)
  TNT1 A 0 A_FireBullets(0,0,-1,50,"driverpuff",FBF_NORANDOM)
  TNT1 A 0 A_SetPitch(Pitch-1)
  TNT1 A 0 A_PlaySound("weapons/rifledistant",3)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,0,0)
  MVLT A 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch-2)
  TNT1 A 0 A_Light0
  MVLT AAA 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  MVLT A 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MVLT A 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  MVLT A 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_SetPitch(Pitch+1)
  TNT1 A 0 A_AlertMonsters
    "----"  # 0 a_JumpIfInventory("MusketLoaded",1,"recockzoomed")
  goto ready
 Recockzoomed:
  MVLT A 1 A_WeaponReady(WRF_NOFIRE)
  MVLT A 1 A_SetPitch(Pitch-0.5)
  MVLT A 0 A_PlaySound("weapons/musketlever",3)
  MVLT A 1 A_SetPitch(Pitch-0.5)
  MVLT A 2 A_Weaponready(WRF_NOFIRE)
  MVLT A 2 A_SetPitch(Pitch-1)
  MVLT A 0 A_FireCustomMissile("slugCasingSpawner",0,0,10,-5)
  MVLT A 2 A_SetPitch(Pitch+1)
  MVLT A 2 A_SetPitch(Pitch+1)
  MVLT A 2 A_Weaponready(WRF_NOPRIMARY|WRF_ALLOWUSER1)
  MVLT A 2 A_SetPitch(Pitch+1)
  MVLT A 2 A_Weaponready(WRF_NOPRIMARY|WRF_ALLOWUSER1)
  goto ready
 Reload:
		"----"  # 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("musketLoaded",3,"Ready")
        TNT1 A 0 A_JumpIfInventory("slugammo",1,"Work1")
        Goto Ready
	Work1:
        TNT1 A 0 A_ZoomFactor(1)
		MS3T BCDE 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH) 
		TNT1 A 3 A_WEAPONREADY(WRF_NOFIRE|WRF_NOSWITCH)
		MS3T FGHI 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		MS3T I 0 A_PlaySound("weapons/musketopen",CHAN_7)
		MS3T JKKL 3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		MS3T MNO 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		MS3T PPPPPPPONML 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		MS3T K 0 A_PlaySound("weapons/musketopen",CHAN_7)
		MS3T KKJI 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	Loadloop:
	    TNT1 A 0 a_JumpIfInventory("musketLoaded",3,"loadDone")
		TNT1 A 0 A_Giveinventory("musketloaded",1)
		TNT1 A 0 A_TakeInventory("slugammo",1,TIF_NOTAKEINFINITE)
		TNT1 A 0 a_JumpIfInventory("slugAmmo",1,"loadloop")
		goto loaddone
	LoadDone:
		MS3T IH 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		MS3T GFEDCBA 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		Goto Recock
   Altfire:
        MS3T A 0 A_JumpIfInventory("Scopecheck",1,"UnZoom")
        MS3T A 0 A_GiveInventory("Scopecheck",1)
        MS3T A 0 A_ZoomFactor(4)
		MS3T A 0 A_JumpIfInventory("drivercharge",1,"holdzoomed")
        Goto Ready
    UnZoom:
        TNT1 A 0 A_TakeInventory("Scopecheck",1)
        TNT1 A 0 A_ZoomFactor(1)
		MS3T A 0 A_JumpIfInventory("drivercharge",1,"hold")
        Goto Ready
	User1:
	    TNT1 A 0 A_TakeInventory("drivercharge", 40)
		TNT1 A 0 A_TakeInventory("Scopecheck",1)
	    TNT1 A 0 A_ZoomFactor(1)
	    MS3T WXYZ 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A    3 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		MS3T ZYXW 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
	Zoom:
	    MS3T A 0  A_giveinventory("lightlit",1)
	    MS3T A 0  A_SelectWeapon("crowbar")
		MS3T A 0  A_SelectWeapon("crowbar2")
		goto deselect
 Spawn:
  MK3P A 10
		MK3P A 1 bright
		loop
 }
}